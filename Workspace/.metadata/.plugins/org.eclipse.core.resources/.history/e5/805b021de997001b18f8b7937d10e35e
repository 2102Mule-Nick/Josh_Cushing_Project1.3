package com.staykeep.controller;

import java.sql.Date;
import java.sql.Time;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.staykeep.daoimpl.StayDaoImpl;
import com.staykeep.pojo.Stay;

//REST Controller for all database functionality concerning stay objects.
@RestController
public class StayController {

	// StayDaoImpl object holding functionality.
	private StayDaoImpl stayDaoImpl;

	// Auto-Wired setter. Nothing calls this.
	@Autowired
	public void setStayDaoImpl(StayDaoImpl stayDaoImpl) {
		this.stayDaoImpl = stayDaoImpl;
	}

//-----------------------------------------------------------------------------
//1
	// Controller method that returns a list of all stays.
	@GetMapping("/stay")
	public List<Stay> getAllStays() {
		List<Stay> stayList = stayDaoImpl.getAllStays();
		return stayList;
	}

// -----------------------------------------------------------------------
//2
	// Controller method that returns a single stay given the id
	@GetMapping("/stay/{s_id}")
	public Stay getStayInfoById(@PathVariable int s_id) {
		Stay stay = stayDaoImpl.getStayInfoById(s_id);
		return stay;
	}

// -----------------------------------------------------------------------
//3
	// Controller method that creates a new list based off the following.
	@PostMapping("/stay")
	public void createNewStay(@RequestBody Stay stay) {
		stayDaoImpl.createNewStay(stay);
	}
	
// -----------------------------------------------------------------------
//4
	// Controller method that deletes a stay by id.
	@DeleteMapping("/stay/{s_id}")
	public void deleteStay(@PathVariable int s_id) {
		stayDaoImpl.deleteStay(s_id);
	}

// -----------------------------------------------------------------------
//5	
	//  Controller method that sets stay currency
	@PutMapping("/stay/{s_id}/current/{is_current}")
	public void setIsCurrent(@PathVariable boolean is_current, @PathVariable int s_id) {
		boolean wasUpdated = stayDaoImpl.setIsCurrent(is_current, s_id);
	}
	
// -----------------------------------------------------------------------
//6		
	// Controller method that requests staykeep to set bill
	@PutMapping("/stay/b")
	public void setBill(@RequestBody Stay stay) {
		boolean wasUpdated = stayDaoImpl.setBill(stay);
	}
	
// -----------------------------------------------------------------------
//7	
	
	

	@PutMapping("/stay/itime/{s_id}")
	public void setStayInTime(@PathVariable Time ch_i_time, @PathVariable int s_id) {
		stayDaoImpl.setStayInTime(ch_i_time, s_id);
	}

	@PutMapping("/stay/idate/{s_id}")
	public void setStayInDate(@PathVariable Date ch_i_date, @PathVariable int s_id) {
		stayDaoImpl.setStayInDate(ch_i_date, s_id);

	}

	@PutMapping("/stay/otime/{s_id}")
	public void setStayOutTime(@PathVariable Time ch_o_time, @PathVariable int s_id) {
		stayDaoImpl.setStayOutTime(ch_o_time, s_id);
	}

	@PutMapping("/stay/odate/{s_id}")
	public void setStayOutDate(@PathVariable Date ch_o_date, @PathVariable int s_id) {
		stayDaoImpl.setStayOutDate(ch_o_date, s_id);
	}

}