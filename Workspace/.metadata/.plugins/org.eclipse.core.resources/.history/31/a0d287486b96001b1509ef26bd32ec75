package com.staykeep.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RestController;

import com.staykeep.daoimpl.GuestDaoImpl;
import com.staykeep.pojo.Guest;

//REST Controller for all database functionality concerning guest objects.
@RestController
public class GuestController {

	// GuestDaoImpl object holding functionality.
	private GuestDaoImpl guestDaoImpl;

	//Auto-Wired setter. Nothing calls this.
	@Autowired
	public void setGuestDaoImpl(GuestDaoImpl guestDaoImpl) {
		this.guestDaoImpl = guestDaoImpl;
	}
	
//---------------------------------------------------------------------
	
	@GetMapping("/guest")
	public List<Guest> getAllGuests() {
		List<Guest> guestList = guestDaoImpl.getAllGuests();
		return guestList;
	}
	
	@GetMapping("/guest/{g_id}")
	public Guest getGuestInfoById(@PathVariable int g_id) {
		Guest guest = guestDaoImpl.getGuestInfoById(g_id);
		return guest;
	}
	
	@PutMapping("/guest/{g_id}/firstname/{f_name}")
	public void setGuestFname(@PathVariable int g_id, @PathVariable String f_name) {
		guestDaoImpl.setGuestFname(f_name, g_id);
	}
	
	@PutMapping("/guest/{g_id}/lastname/{l_name}")
	public void setGuestLname(@PathVariable int g_id, @PathVariable String l_name) {
		guestDaoImpl.setGuestLname(l_name, g_id);
	}
	
	@PutMapping("/guest/{g_id}/payment/{cc_num}")
	public boolean setGuestCcnum(@PathVariable int g_id, @PathVariable String cc_num) {
		boolean wasUpdated = guestDaoImpl.setGuestCcnum(cc_num, g_id);
		return wasUpdated;
	}
	
	@PostMapping("/guest/firstname/{f_name}/lastname/{l_name}/payment/{cc_num}")
	public boolean creatNewGuest(@PathVariable String f_name, @PathVariable String l_name, @PathVariable String cc_num) {
		boolean wasInserted = guestDaoImpl.createNewGuest(f_name, l_name, cc_num);
		return wasInserted;
	}
	
	@DeleteMapping("/guest/{g_id}")
	public boolean deleteGuest(@PathVariable int g_id) {
		boolean wasDeleted = guestDaoImpl.deleteGuest(g_id);
		return wasDeleted;
	}
}


/*
@DeleteMapping("/guest/{g_id}")
public void deleteGuest(@PathVariable int g_id) {
	guestDaoImpl.deleteGuest(g_id);
}
*/
 